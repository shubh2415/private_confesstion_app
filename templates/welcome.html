<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>anonymousworld.com</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="chat-container">
  <div class="chat-header">
    <h3>Welcome To The Anonymous World</h3>
    <div class="header-right">
      <!-- Description Icon/Button as a link -->
      <a href="{{ url_for('app_details') }}" class="description-btn">i</a>
      <div class="profile">
        <img src="{{ url_for('static', filename='user.avif') }}" alt="Profile">
        <span>{{ session['user_name'] }}</span>
      </div>
    </div>
  </div>
  <div class="chat-messages">
    {% for msg in messages %}
      <div class="message">
        <div class="message-content">
          <strong>Ann{{ msg[2] }}:</strong> {{ msg[1] }}
          {% if msg[0] in suggestions %}
            {% for suggestion in suggestions[msg[0]] %}
              <div class="suggestion">Suggestion by Ann{{ suggestion[1] }}: {{ suggestion[0] }}</div>
            {% endfor %}
          {% endif %}
        </div>
        {% if user_id == msg[2] %}
          <form method="POST" action="{{ url_for('delete_message', message_id=msg[0]) }}" class="delete-form">
            <button type="submit">Delete</button>
          </form>
        {% else %}
          <form method="POST" action="{{ url_for('send_suggestion') }}" class="suggestion-form">
            <input type="hidden" name="message_id" value="{{ msg[0] }}">
            <input type="text" name="suggestion_text" placeholder="Suggest..." style="width: 120px;">
            <button type="submit">➤</button>
          </form>
        {% endif %}
      </div>
    {% endfor %}
  </div>
  <form method="POST" action="{{ url_for('send_message') }}" class="chat-input">
    <textarea name="message" placeholder="Type a message..." required></textarea>
    <button class="send-btn" type="submit">➤</button>
  </form>
</div>

<script>
  // Messages ko bottom par scroll karne ke liye
  window.onload = function() {
    const chatMessages = document.querySelector('.chat-messages');
    chatMessages.scrollTop = chatMessages.scrollHeight;
  };
</script>

</body>
</html>
